<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MoleditPy チュートリアル 0: セットアップガイド</title>
    <link rel="stylesheet" href="tutorial_style.css">
    <style>
        /* Japanese font optimization */
        body {
            font-family: "Hiragino Sans", "Hiragino Kaku Gothic ProN", "Yu Gothic", Meiryo, sans-serif;
        }
    </style>
    <link rel="icon" href="img/favicon.ico" type="image/x-icon">
</head>

<body>
    <div class="container">
        <header>
            <h1>MoleditPy PySCF Calculator Plugin Tutorial</h1>
            <h2>0. セットアップガイド</h2>
            <p style="margin-top: 0.5rem; opacity: 0.8; font-size: 0.9rem;">(Mac / Linux / Windows WSL)</p>
        </header>

        <nav class="tutorial-nav">
            <details>
                <summary>チュートリアルメニュー</summary>
                <ul>
                    <li><a href="index.html">ホーム</a></li>
                    <li><a href="tutorial_00_setup_jp.html" class="active">0. セットアップ</a></li>
                    <li><a href="tutorial_01_butadiene_jp.html">1. ブタジエン</a></li>
                    <li><a href="tutorial_02_ethane_jp.html">2. エタン</a></li>
                    <li><a href="tutorial_03_acetone_jp.html">3. アセトン</a></li>
                    <li><a href="tutorial_04_sn2_jp.html">4. S<sub>N</sub>2反応</a></li>
                </ul>
            </details>
        </nav>


        <section>
            <h2>目的</h2>
            <p>MoleditPyおよびPySCF
                Calculatorプラグインを使用するための環境構築を行います。PySCFはWindowsネイティブ環境では動作が不安定な場合があるため、Windows・Mac・Linuxそれぞれの環境に合わせたセットアップ方法を解説します。
            </p>
        </section>

        <section>
            <h2>1. Mac / Linux の場合</h2>
            <p>MacおよびLinuxユーザーは、標準のPython環境（ターミナル）から直接インストールできます。</p>

            <h3>Step 1: MoleditPy本体のインストール</h3>
            <ol class="step-list">
                <li>ターミナルを開き、以下のコマンドを実行してインストーラーを導入します。
                    <pre><code class="language-bash">pip install moleditpy-installer</code></pre>
                    <p><em>※ インストールログを確認してください。「WARNING: The script moleditpy-installer is installed in ... which is not
                            on PATH」のような警告が表示された場合、そのフルパスを使用してください。</em></p>
                </li>
                <li>ショートカット作成コマンドを実行します。
                    <pre><code class="language-bash">moleditpy-installer</code></pre>
                    <p><em>※ コマンドが見つからない場合は、<code>pip install</code> のログを確認し、警告に出ているパス（例:
                            <code>~/.local/bin/moleditpy-installer</code>）を使用してください。PATHが通っていない可能性があります。</em></p>
                    <p><em>※ Ubuntu 24.04等で "error: externally-managed-environment"
                            と出る場合は、<code>pip install moleditpy-installer --break-system-packages</code> を実行してください。</em>
                    </p>
                </li>
                <li>以下のコマンドでアプリが起動することを確認します（初回起動は時間がかかります）。
                    <pre><code class="language-bash">moleditpy</code></pre>
                </li>
            </ol>

            <h3>Step 2: PySCF Calculatorプラグインの導入</h3>
            <ol class="step-list">
                <li>必要なライブラリをインストールします。
                    <pre><code class="language-bash">pip install pyscf geometric matplotlib</code></pre>
                </li>
                <li><a href="https://hiroyokoyama.github.io/moleditpy-plugins/explorer/?q=PySCF+Calculator"
                        target="_blank">Plugin Explorer</a> からプラグインをダウンロードします。</li>
                <li>ダウンロードしたファイルを解凍し、中にある <code>pyscf_calculator</code> フォルダをプラグインディレクトリに配置します。
                    <ul>
                        <li><strong>Mac/Linux:</strong> <code>~/.moleditpy/plugins/</code></li>
                    </ul>
                </li>
                <li>MoleditPyを再起動し、メニューの <code>Extensions</code> > <code>PySCF Calculator</code> が表示されれば完了です。</li>
            </ol>
        </section>

        <section>
            <h2>2. Windows (WSL) の場合</h2>
            <p>Windowsでは、PySCFが正常に動作しないことが多いため、<strong>Windows Subsystem for Linux (WSL)</strong>
                を使用してLinux版として実行することを強く推奨します。（※ GUI機能 (WSLg) を使用するには Windows 11 または 最新の Windows 10 が必要です）</p>

            <h3>Step 1: WSLのセットアップ</h3>
            <ol class="step-list">
                <li>PowerShellを「管理者として実行」し、以下のコマンドでWSL（Ubuntu）をインストールします。
                    <pre><code class="language-powershell">wsl --install</code></pre>
                    <p><em>※インストール完了後、PCの再起動が必要になる場合があります。再起動後、ユーザー名とパスワードを設定してください。</em></p>
                </li>
                <li>Ubuntuのターミナルを開き、パッケージリストを更新します。
                    <pre><code class="language-bash">sudo apt update</code></pre>
                </li>
                <li>GUIアプリ（PyQt6）の実行に必要なライブラリをインストールします。
                    <pre><code class="language-bash">sudo apt install python3-pip \
libgl1 libegl1 libxkbcommon-x11-0 libdbus-1-3 \
libxcb-cursor0 libxcb-xinerama0</code></pre>
                </li>
            </ol>

            <h3>Step 2: MoleditPy とプラグインのインストール</h3>
            <p>WSLのターミナル内で、Linuxと同様の手順を実行します。</p>
            <ol class="step-list">
                <li><strong>MoleditPyのインストール:</strong>
                    <pre><code class="language-bash">pip install moleditpy-installer
moleditpy-installer</code></pre>
                    <p><em>※ <code>moleditpy-installer</code>
                            が見つからない場合は、<code>pip install</code> のログを確認し、警告に出ているパス（例:
                            <strong><code>~/.local/bin/moleditpy-installer</code></strong>）を使用してください。</em></p>
                    <p><em>※ "error: externally-managed-environment" と出る場合は、末尾に <code>--break-system-packages</code>
                            を追加して実行してください。</em></p>
                </li>
                <li><strong>PySCFと依存ライブラリのインストール:</strong>
                    <pre><code class="language-bash">pip install pyscf geometric matplotlib</code></pre>
                </li>
                <li><strong>プラグインの配置:</strong>
                    <ul>
                        <li><a href="https://hiroyokoyama.github.io/moleditpy-plugins/explorer/?q=PySCF+Calculator"
                                target="_blank">Plugin Explorer</a> からプラグインをダウンロードし、解凍しておきます。
                        </li>
                        <li>WindowsのエクスプローラーからWSL内のプラグインフォルダにアクセスし、<code>pyscf_calculator</code> フォルダをコピーします。
                            <p>アドレスバーに <code>\\wsl$\Ubuntu\home\YourName\.moleditpy\plugins\</code>
                                等を入力するか、ナビゲーションウィンドウの「Linux」からアクセスできます。</p>
                            <p><em>（事前にフォルダを作成しておく必要があります）</em></p>
                            <pre><code class="language-bash">mkdir -p ~/.moleditpy/plugins</code></pre>
                        </li>
                    </ul>
                </li>
                <li><strong>起動確認:</strong>
                    <pre><code class="language-bash">moleditpy</code></pre>
                    <p>WSLからLinuxのGUIアプリとしてMoleditPyが起動します。</p>
                </li>
            </ol>
        </section>

        <div class="nav-links">
            <a href="index.html" class="btn btn-secondary">&larr; ホームに戻る</a>
            <a href="tutorial_01_butadiene_jp.html" class="btn">次へ: ブタジエンのチュートリアル &rarr;</a>
        </div>
    </div>
</body>

</html>